<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Series y Películas</title>
  <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <header>
    <h1>Series y Películas Populares</h1>

    <input type="text" id="buscar" placeholder="Buscar...">
  </header>

  <div>

    <h2>Series Populares</h2>

    <div id="contenedor-series" class="grid"></div>

    <h2>Películas Populares</h2>

    <div id="contenedor-peliculas" class="grid"></div>
  </div>

  <div id="modal" class="modal">

    <div class="contenido-modal">
      <span class="cerrar">&times;</span>
      <div id="detalle-elemento"></div>
    </div>
  </div>

    <script>

    const apiKey = 'cf099e1443bc9a2df637136e1cb405d8';
    let series = [];
    let peliculas = [];

    document.addEventListener('DOMContentLoaded', () => {
    obtenerSeriesPopulares();
    obtenerPeliculasPopulares();
    });

    async function obtenerSeriesPopulares() {
    const apiUrl = `https://api.themoviedb.org/3/tv/popular?api_key=${apiKey}&language=es-ES&page=1`;
    try {
        const respuesta = await fetch(apiUrl);
        const datos = await respuesta.json();
        series = datos.results;
        mostrarSeries(series);
    } catch (error) {
        console.error('Error al obtener series populares:', error);
    }
    }

    async function obtenerPeliculasPopulares() {
    const apiUrl = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=es-ES&page=1`;
    try {
        const respuesta = await fetch(apiUrl);
        const datos = await respuesta.json();
        peliculas = datos.results;
        mostrarPeliculas(peliculas);
    } catch (error) {
        console.error('Error al obtener películas populares:', error);
    }
    }

    function mostrarSeries(series) {
    const contenedorSeries = document.getElementById('contenedor-series');
    contenedorSeries.innerHTML = '';
    
    series.forEach(serie => {
        let etiquetasGenero = '';
        if (serie.genre_ids) {
        etiquetasGenero = serie.genre_ids.map(id => obtenerNombreGenero(id)).join(', ');
        }

        contenedorSeries.innerHTML += `
        <div class="tarjeta">
            <img src="https://image.tmdb.org/t/p/w500${serie.poster_path}" alt="${serie.name}">
            <h3>${serie.name}</h3>
            <div class="contenedor-genero">${etiquetasGenero}</div>
        </div>
        `;
    });
    }

    function mostrarPeliculas(peliculas) {
    const contenedorPeliculas = document.getElementById('contenedor-peliculas');
    contenedorPeliculas.innerHTML = '';

    peliculas.forEach(pelicula => {
        let etiquetasGenero = '';
        if (pelicula.genre_ids) {
        etiquetasGenero = pelicula.genre_ids.map(id => obtenerNombreGenero(id)).join(', ');
        }

        contenedorPeliculas.innerHTML += `
        <div class="tarjeta">
            <img src="https://image.tmdb.org/t/p/w500${pelicula.poster_path}" alt="${pelicula.title}">
            <h3>${pelicula.title}</h3>
            <div class="contenedor-genero">${etiquetasGenero}</div>
        </div>
        `;
    });
    }

    function obtenerNombreGenero(id) {
    const generos = {
        28: 'Acción',
        12: 'Aventura',
        16: 'Animación',
        35: 'Comedia',
        80: 'Crimen',
        99: 'Documental',
        18: 'Drama',
        10751: 'Familiar',
        14: 'Fantasía',
        36: 'Historia',
        27: 'Terror',
        10402: 'Música',
        9648: 'Misterio',
        10749: 'Romance',
        878: 'Ciencia ficción',
        10770: 'Película de TV',
        53: 'Suspense',
        10752: 'Bélica',
        37: 'Western'
    };

    return generos[id] || 'Desconocido';
    }
    </script>
</body>
</html>
